{"version":2,"name":"RP Tools - ActN","disableSend":false,"placeBeforeInput":false,"injectInput":true,"color":"rgba(0, 0, 0, 0)","onlyBorderColor":false,"qrList":[{"id":7,"showLabel":false,"label":"ActN - Role","title":"","message":"// Ask to pick new role to use for Actor's Note. |\n/buttons labels=[\"user\",\"assistant\",\"system\"] Set the Instruct role for Actor's Note |\n\n// Set Actor's Note role to input. |\n/setvar key=actn_role {{pipe}} |\n\n// Check if Actor's Note is already injected into the context. If so, then re-inject it with the new role. |\n/if left=\"{{getvar::actn_content}}\" right=\"\" rule=neq {:\n\t// Check if Actor's Note depth is already set. Default to 0 if it isn't. |\n\t/if left=\"{{getvar::actn_depth}}\" right=\"\" rule=neq else={:\n\t\t/inject id=actn_inject position=chat depth=0 scan=true role={{getvar::actn_role}} {{getvar::actn_content}}\n\t:}\n\t{:\n\t\t/inject id=actn_inject position=chat depth={{getvar::actn_depth}} scan=true role={{getvar::actn_role}} {{getvar::actn_content}}\n\t:}\n:}","contextList":[],"preventAutoExecute":true,"isHidden":false,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":5,"showLabel":false,"label":"ActN - Depth","title":"","message":"// Get input for the new Actor's Note depth. |\n/input default={{getvar::actn_depth}} Set the Actor's Note depth |\n\n// Define local var with input. |\n/setvar key=actn_new_depth {{pipe}} |\n\n// Check if input is a valid number. |\n/if left={{getvar::actn_new_depth}} right=-1 rule=gt else={:\n\t// Flush the defined local var then abort and echo error message. |\n\t/flushvar actn_new_depth |\n\t/abort quiet=false Not a valid number!\n:}\n{:\n\t// Check if Actor's Note role is set. Default to 'system' if it isn't. |\n\t/if left=\"{{getvar::actn_role}}\" right=\"\" rule=neq\n\t\telse={: /setvar key=actn_cur_role system :}\n\t\t{: /setvar key=actn_cur_role {{getvar::actn_role}} :} |\n\t\n\t// Set Actor's Note depth to the input. |\n\t/setvar key=actn_depth {{getvar::actn_new_depth}} |\n\t\n\t// Check if Actor's Note is already injected into the context. If so, re-inject the Actor's Note with the new depth. |\n\t/if left=\"{{getvar::actn_content}}\" right=\"\" rule=neq {:\n\t\t/inject id=actn_inject position=chat depth={{getvar::actn_depth}} scan=true role={{getvar::actn_cur_role}} {{getvar::actn_content}}\n\t:}\n:} |\n\n// Flush the unnecessary local vars. |\n/flushvar actn_new_depth |\n/flushvar actn_cur_role","contextList":[],"preventAutoExecute":true,"isHidden":false,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":3,"showLabel":false,"label":"ActN - Remove","title":"","message":"// Remove the Actor's Note prompt and var. |\n/flushinject actn_inject |\n/flushvar actn_content","contextList":[],"preventAutoExecute":true,"isHidden":false,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""},{"id":1,"showLabel":false,"label":"ActN - Add/Edit","title":"","message":"// Ask for Actor's Note prompt. |\n/input default=\"{{getvar::actn_content}}\" Write An Actor's Note |\n\n// Cancel check. |\n/if left={{pipe}} rule=eq right=\"\"\n\telse={: /pass {{pipe}} :} \n\t{: /abort :} |\n\n// Set input content to local var. |\n/setvar key=actn_new_content {{pipe}} |\n\n// Check if Actor's Note role is set. Default to 'system' if it isn't. |\n/if left=\"{{getvar::actn_role}}\" right=\"\" rule=neq\n\telse={: /setvar key=actn_cur_role system :}\n\t{: /setvar key=actn_cur_role {{getvar::actn_role}} :} |\n\n// Check if the inputted prompt matches the current prompt. |\n/if left=actn_new_content right=actn_content rule=neq {:\n\t// Check if Actor's Note depth is set. Default to 0 if it isn't. |\n\t/if left=\"{{getvar::actn_depth}}\" right=\"\" rule=neq else={:\n\n\t\t// Set current Actor's Note to inputted prompt. |\n\t\t/setvar key=actn_content {{getvar::actn_new_content}} |\n\n\t\t// Inject the new prompt into context. |\n\t\t/inject id=actn_inject position=chat depth=0 scan=true role={{getvar::actn_cur_role}} {{getvar::actn_content}}\n\t:}\n\t{:\n\t\t// Set current Actor's Note to inputted prompt. |\n\t\t/setvar key=actn_content {{getvar::actn_new_content}} |\n\n\t\t// Inject the new prompt into context. |\n\t\t/inject id=actn_inject position=chat depth={{getvar::actn_depth}} scan=true role={{getvar::actn_cur_role}} {{getvar::actn_content}}\n\t:}\n:} |\n\n// Flush Local vars that are no longer necessary. |\n/flushvar actn_cur_role |\n/flushvar actn_new_content","contextList":[],"preventAutoExecute":true,"isHidden":false,"executeOnStartup":false,"executeOnUser":false,"executeOnAi":false,"executeOnChatChange":false,"executeOnGroupMemberDraft":false,"executeOnNewChat":false,"automationId":""}],"idIndex":8}